<!DOCTYPE html>

<html>

    <head>

    <script src="javascript/publicsquare.js"> </script>
    <script src="javascript/jquery/jquery-1.7.2.min.js"> </script>


    <script src="javascript/xml2json.js"> </script>
    <script src="javascript/ajax.js"> </script>
    

    <script> 


        function callback(json, textStatus, jqXHR) {
                console.log(json);
                console.log(jqXHR);
                console.log(document.cookie);
            }
            
        function xmlCallback(xml, textStatus, jqXHR) {
                console.log(xmlToJson(xml));
            }
			
		function newcallback(xml2, textStatus, jqXHR) {
			$(xml2).find("node").slice(1).each(function() {
				console.log(this);
			
			});
		}
        
        function errorcallback(json, textStatus, jqXHR) {
			console.log("Error Callback");
			console.log(json);
			console.log(jqXHR);
			console.log(document.cookie);
        }
    
    
            /********** new 'rest' services **********/
        
        //NB: dataType is ignored by these calls
		
		//Daniel - I had to remove dataType: "json" to get it to work in chrome
        
/*        function index_project() {
            $.ajax({
                type: "GET",
                url: PS.ajax.getServerPrefix() + "services-xml/project",
                success: callback,
            });
        }
        
        function index_item() {
            $.ajax({
                type: "GET",
                url: PS.ajax.getServerPrefix() + "services-xml/item",
                success: callback,
            });
            }       
        
        function index_group() {
            $.ajax({
                type: "GET",
                url: PS.ajax.getServerPrefix() + "services-xml/group",
                success: callback,
            });
            }       
        
        function index_meeting() {
            $.ajax({
                type: "GET",
                url: PS.ajax.getServerPrefix() + "services-xml/meeting",
                success: callback,
            });
            }       
        
        function index_user() {
            $.ajax({
                type: "GET",
                url: PS.ajax.getServerPrefix() + "services-xml/user",
                success: callback,
            });
            }    */
    

    
        function foo() {
            //PS.ajax.projectIndex(callback);
            PS.ajax.addProjectUser(xmlCallback, undefined, 745, 901);
        }
   
    
    </script>

    </head>

    <body>

    <!-- a testfile for new publicsquare ajax methods -->
    
        <p>publicsquare object methods</p>
    
        <p>
		Project
        <button onclick="PS.ajax.projectIndex(callback, errorcallback)"> project index </button>
		<button onclick="PS.ajax.projectCreate(callback, errorcallback, 'Test Project', 1)"> project create </button>
		<button onclick="PS.ajax.projectRetrieve(callback, errorcallback, 1126)"> project retrieve </button>
		<button onclick="PS.ajax.projectDelete(callback, errorcallback, 1135)"> project delete </button>

        </p>
		
		<p>
		Meeting
        <button onclick="PS.ajax.meetingIndex(callback, errorcallback)"> meeting index </button>
		<button onclick="PS.ajax.meetingCreate(callback, errorcallback, 'Test Meeting', 745, 1122, 'August 9th, 2012', '11 AM', '5 PM', '#DanielBdayMeeting')"> meeting create </button>
		<button onclick="PS.ajax.meetingRetrieve(callback, errorcallback, 841)"> meeting retrieve </button>
		<button onclick="PS.ajax.meetingDelete(callback, errorcallback, 1128)"> meeting delete </button>

        </p>
		
		<p>
		Group
        <button onclick="PS.ajax.groupIndex(callback, errorcallback)"> group index </button>
		<button onclick="PS.ajax.groupCreate(callback, errorcallback, 'Awesome Group!', 745, 1122)"> group create </button>
		<button onclick="PS.ajax.groupRetrieve(callback, errorcallback, 1129)"> group retrieve </button>
		<button onclick="PS.ajax.groupDelete(callback, errorcallback, 1129)"> group delete </button>

        </p>
		
		<p>
		Item
        <button onclick="PS.ajax.itemIndex(callback, errorcallback)"> item index </button>
		<button onclick="PS.ajax.itemCreate(callback, errorcallback, 'Cool New Item', 745, '11:18 AM')"> item create </button>
		<button onclick="PS.ajax.itemRetrieve(callback, errorcallback, 842)"> item retrieve </button>
		<button onclick="PS.ajax.itemDelete(callback, errorcallback, 842)"> item delete </button>

        </p>
		
		<p>
		User Node
        <button onclick="PS.ajax.userIndex(callback, errorcallback)"> user index </button>
		<button onclick="PS.ajax.userCreate(callback, errorcallback, 'Daniel Sabourin', 'admin')"> user create </button>
		<button onclick="PS.ajax.userRetrieve(1, callback, errorcallback)"> user retrieve </button>
		<button onclick="PS.ajax.userDelete(745, callback, errorcallback)"> user delete </button>

        </p>
		 		
		</br>
        
        <p>publicsquare relationship</p>
        <p>
        <button onClick="PS.ajax.indexUserProjects(newcallback, undefined, 2);"> project user index </button>
        <button onClick="PS.ajax.addProjectUser(callback, undefined, 745, 901);"> project user add </button>
        <button onClick="PS.ajax.removeProjectUser(callback, undefined, 745, 901);"> project user remove </button>
        </p>

        <p>
        <button onClick="PS.ajax.indexUserMeetings(callback, undefined, 2);"> meeting user index </button>
        <button onClick="PS.ajax.addMeetingUser(callback, undefined, 744, 747);"> meeting user add </button>
        <button onClick="PS.ajax.removeMeetingUser(callback, undefined, 744, 747);"> meeting user remove </button>
        </p>


        
        
        
    </body>

</html>
